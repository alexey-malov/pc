# Применение многопоточности в сетевых приложениях

- [Применение многопоточности в сетевых приложениях](#применение-многопоточности-в-сетевых-приложениях)
  - [Задания](#задания)
    - [Требования](#требования)
    - [Задание 1](#задание-1)
      - [Вариант 1 — Интернет-радио — 100 баллов](#вариант-1--интернет-радио--100-баллов)
        - [Бонус за визуализацию аудиосигнала — 20 баллов](#бонус-за-визуализацию-аудиосигнала--20-баллов)
        - [Бонус за применение алгоритмов сжатия аудиоданных перед отправкой — 50 баллов](#бонус-за-применение-алгоритмов-сжатия-аудиоданных-перед-отправкой--50-баллов)
      - [Вариант 2 — Интернет-телевидение — 200 баллов](#вариант-2--интернет-телевидение--200-баллов)
        - [Бонус за применение алгоритмов сжатия аудиоданных перед отправкой — 50 баллов](#бонус-за-применение-алгоритмов-сжатия-аудиоданных-перед-отправкой--50-баллов-1)
        - [Бонус за применение алгоритмов сжатия кадров перед отправкой — 50 баллов](#бонус-за-применение-алгоритмов-сжатия-кадров-перед-отправкой--50-баллов)

## Задания

- Для получения оценки "удовлетворительно" нужно набрать не менее 80 баллов.
- На оценку "хорошо" нужно набрать не менее 160 баллов.
- Для получения оценки "отлично" нужно набрать не менее 250 баллов.

### Требования

Обязательно проверяйте успешность всех вызовов функций операционной системы и используемых библиотек
и не игнорируйте ошибки.

Ваш код должен иметь уровень безопасности исключений не ниже базового.
Для этого разработайте (или возьмите готовую) RAII-обёртку, автоматизирующую
управление ресурсами операционной системы.

### Задание 1

Выполните один из предложенных вариантов заданий. Для работы с сетью рекомендуется использовать
кроссплатформенные библиотеки вроде boost.asio.

Для эффективного использования ресурсов компьютера распределите выполнение задач между потоками.

#### Вариант 1 — Интернет-радио — 100 баллов

Разработайте приложение для трансляции аудио по сети с одного компьютера (радиостанции)
на множество клиентских компьютеров (радиоприёмников).
Приложение должно быть способно работать как в режиме радиостанции, так и радиоприёмника.

Запуск в режиме радиостанции:

```bash
radio PORT
```

Запустившись в режиме радиостанции приложение должно записывать звук с микрофона
и транслировать его всем подключившимся радиоприёмникам.

Запуск в режиме радиоприёмника:

```bash
radio ADDRESS PORT
```

При запуске в режиме радиоприемника приложение должно подключиться к серверу, принимать транслируемый
аудиосигнал и выводить его на звуковое устройство компьютера.

Работа клиента и сервера завершается при получении сигнала SIGINT или SIGTERM.
Клиенты должны быть способны подключаться и отключаться динамически.
При завершении работы сервера клиенты должны gracefully обработать эту ситуацию и завершить свою работу.

**Внимание**: компьютеры в сети могут иметь разный порядок байт (Little-endian или Big-endian),
поэтому аудиоданные по сети нужно отправлять в одном из этих форматов, а при получении
преобразовывать в нативный для клиента порядок байт.

Какой из сетевых протоколов использовать: TCP или UDP, выберите на своё усмотрение.

##### Бонус за визуализацию аудиосигнала — 20 баллов

И радиостанция, и радиоприемник должны визуализировать сигнал в виде графика, сигхронно изменяющегося со временем.

##### Бонус за применение алгоритмов сжатия аудиоданных перед отправкой — 50 баллов

Чтобы уменьшить объем передаваемых по сети данных, радиостанция должна передавать аудио-фрагменты
в скомпрессированном виде. Для этого подойдёт какой-нибудь алгоритм сжатия с потерями вроде MP3.

#### Вариант 2 — Интернет-телевидение — 200 баллов

Разработайте приложение для трансляции аудио и видео данных по сети с одного компьютера (станция)
на другие компьютеры (приёмники).

Запуск в режиме телестанции:

```bash
tv PORT
```

`PORT` — порт, на котором телестанция отправляет данные.

Приложение должно захватывать кадры с веб-камеры компьютера и звук с микрофона, а затем
отправлять их подключившимся клиентам.
Придумайте такой способ отправки аудио и видео потока, чтобы предпочтение отдавалось
стабильной передаче звука, а качество картинки (например, разрешение) могло деградировать.

Чтобы видео и звук не теряли синхронизацию, вместе с видео-кадрами отправляйте временные метки.

Запуск в режиме телеприёмника:

```bash
tv ADDRESS PORT
```

Подключается к порту `PORT` компьютера с IP-адресом `ADDRESS` и транслирует передаваемые изображение и звук.

**Внимание**: компьютеры в сети могут иметь разный порядок байт (Little-endian или Big-7endian),
поэтому данные по сети нужно отправлять в одном из этих форматов, а при получении
преобразовывать в нативный для клиента порядок байт.

Какой из сетевых протоколов использовать: TCP или UDP, выберите на своё усмотрение.

##### Бонус за применение алгоритмов сжатия аудиоданных перед отправкой — 50 баллов

Чтобы уменьшить объем передаваемых по сети данных, радиостанция должна передавать аудио-фрагменты
в скомпрессированном виде. Для этого подойдёт какой-нибудь алгоритм сжатия с потерями, например, MP3.

##### Бонус за применение алгоритмов сжатия кадров перед отправкой — 50 баллов

Чтобы уменьшить объем передаваемых по сети данных, радиостанция должна передавать видео-фрагменты
в скомпрессированном виде. Для этого подойдёт какой-нибудь алгоритм сжатия с потерями, например, JPEG.
