# Лабораторная работа №2 — Параллельная обработка данных с использованием многопоточности

- [Лабораторная работа №2 — Параллельная обработка данных с использованием многопоточности](#лабораторная-работа-2--параллельная-обработка-данных-с-использованием-многопоточности)
  - [Задания](#задания)
    - [Требования](#требования)
    - [Задание №1](#задание-1)
      - [Вариант 1 — 100 баллов](#вариант-1--100-баллов)
        - [Бонус за возможность динамической визуализации игрового состояния — 50 баллов](#бонус-за-возможность-динамической-визуализации-игрового-состояния--50-баллов)
        - [Бонус за анализ производительности — 20 баллов](#бонус-за-анализ-производительности--20-баллов)

## Задания

- Для получения оценки "удовлетворительно" нужно набрать не менее X баллов.
- На оценку хорошо нужно набрать не менее Y баллов.
- Для получения оценки "отлично" нужно набрать не менее Z баллов.

### Требования

Обязательно проверяйте успешность всех вызовов функций операционной системы и не оставляйте ошибки незамеченными.

Ваш код должен иметь уровень безопасности исключений не ниже базового.
Для этого разработайте (или возьмите готовую) RAII-обёртку, автоматизирующую
управление ресурсами операционной системы.

### Задание №1

#### Вариант 1 — 100 баллов

Напишите многопоточную версию игры "Жизнь".

Запуск в режиме генерирования поля:

```bash
life generate OUTPUT_FILE_NAME WIDTH HEIGHT PROBABILITY
```

Генерирует выходной файл со следующим содержимым, где с вероятностью `PROBABILITY` (число от 0.0 до 1.0)
генерируются живые клетки:

- В первой строке содержатся два числа — ширина и высота поля
- В последующих строках содержится содержимое поля, где пробел обозначает пустую клетку,
  а символ "#" — живую.

```txt
7 5
#     #
       
  ##
 #   ##
   #   
```

Расчёт следующего шага популяции, с использованием заданного количества потоков.
Пространство имеет форму "тора": у поля шириной 10 и высотой 5 правым соседом клетки с координатой (9, y) является
клетка с координатами (0, y), а для нижним соседом клетки с координатами (x, 4) является клетка (x, 0).

```bash
life step INPUT_FILE_NAME NUM_THREADS [OUTPUT_FILE_NAME]
```

Если имя выходного файла не указано, результат записывается во входной файл.

В стандартный поток вывода программа должна вывести время вычисления следующего состояния популяции.

##### Бонус за возможность динамической визуализации игрового состояния — 50 баллов

Бонус присуждается за возможность запуска программы в графическом режиме:

```bash
life visualize INPUT_FILE_NAME NUM_THREADS
```

В клиентской области окна программа должна выводить содержимое популяции,
где черным пикселям соответствуют живые клетки, а белым — пустые.
В заголовке окна программа должна каждую секунду обновлять среднее время вычисления следующего состояния популяции.

##### Бонус за анализ производительности — 20 баллов

Измерьте зависимость времени расчёта следующего состояния популяции в зависимости от количества потоков и
достигнутое ускорение по сравнению с однопоточным вариантом. Постройте график зависимости.
Сделайте предположение об изменении величины $p$, вычисленной с использованием закона Амдала в зависимости
от количества потоков.
