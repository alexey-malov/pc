# Лабораторная работа №1

- [Лабораторная работа №1](#лабораторная-работа-1)
  - [Задания](#задания)
    - [Требования](#требования)
    - [Задание №1 — 50 баллов](#задание-1--50-баллов)
      - [Бонус за анализ результатов работы программы — 10 баллов](#бонус-за-анализ-результатов-работы-программы--10-баллов)
    - [Задание №2 — 50 баллов](#задание-2--50-баллов)
      - [Бонус за анализ результатов работы программы — 10 баллов](#бонус-за-анализ-результатов-работы-программы--10-баллов-1)
    - [Задание №3 — до 40 баллов](#задание-3--до-40-баллов)
      - [Задача №1](#задача-1)
      - [Задача №2](#задача-2)
      - [Задача №3](#задача-3)
      - [Задача №4](#задача-4)

## Задания

- Для получения оценки "удовлетворительно" нужно набрать не менее 80 баллов.
- На оценку хорошо нужно набрать не менее 120 баллов.
- Для получения оценки "отлично" нужно набрать не менее 150 баллов.

### Требования

Обязательно проверяйте успешность всех вызовов функций операционной системы и не оставляйте ошибки незамеченными.

Ваш код должен иметь уровень безопасности исключений не ниже базового.
Для этого разработайте (или возьмите готовую) RAII-обёртку, автоматизирующую
управление ресурсами операционной системы.

### Задание №1 — 50 баллов

Напишите программу `make-archive` для ОС Linux, которая создаёт архив сжатых файлов.
Для сжатия файлов ваша программа должна использовать программу `gzip`.
Для создания архива программа должна использовать программу `tar`.

Программа должна уметь работать в последовательном и параллельном режиме работы.

Синтаксис командной строки для последовательного режима работы:

```bash
make-archive -S ARCHIVE-NAME [INPUT-FILES]
```

В этом режиме файлы сначала компрессируются при помощи `gzip`,
а затем при помощи `tar` объединяются в один файл.
Исходные файлы должны остаться без изменения.

Синтаксис командной строки в параллельном режиме работы:

```bash
make-archive -P NUM-PROCESSES ARCHIVE-NAME [INPUT-FILES]
```

Ключ `-P` выполняет компрессию, порождая дочерние процессы.
Максимальное количество дочерних процессов передаётся как аргумент ключа `-P`.

В конце программа должна вывести полное время время работы,
а также время работы последовательного участка (генерирование архива).

#### Бонус за анализ результатов работы программы — 10 баллов

Постройте график зависимости времени работы программы в зависимости от количества дочерних процессов.
Суммарный размер входных файлов должен составлять несколько десятков мегабайт.

Сравните фактическое ускорение, полученное при использовании N процессов с теоретически возможным,
вычисленным с использованием закона Амдала. Сделайте выводы.

### Задание №2 — 50 баллов

Напишите программу `extract-files` для ОС Linux,
которая извлекает и распаковывает файлы из архива, созданного программой `make-archive`.
Для распаковки ваша программа должна использовать `gzip`.
Для извлечения файлов из архива программа должна использовать `tar`.

Синтаксис командной строки в последовательном режиме работы:

```bash
extract-files -S ARCHIVE-NAME OUTPUT-FOLDER
```

В этом режиме программа должна извлечь файлы из архива, а потом последовательно распаковать их.

Синтаксис командной строки в параллельном режиме работы:

```bash
extract-files -P NUM-PROCESSES ARCHIVE-NAME OUTPUT-FOLDER.
```

В этом режиме программа должна извлечь файлы из архива,
а потом параллельно распаковать их, используя не более `NUM-PROCESSES` процессов.

В конце работы программа должна вывести время своей работы.

#### Бонус за анализ результатов работы программы — 10 баллов

Постройте график зависимости времени работы программы в зависимости от количества дочерних процессов.
Суммарный размер входных файлов должен составлять несколько десятков мегабайт.

Сравните фактическое ускорение, полученное при использовании N процессов с теоретически возможным,
вычисленным с использованием закона Амдала. Сделайте выводы.

### Задание №3 — до 40 баллов

Решите задачи:

#### Задача №1

Функция F в вашей программе занимает 90% времени её работы.
Вам удалось ускорить эту функцию в 6 раз.
Во сколько раз ускорится время работы программы?

#### Задача №2

Последовательная часть программы занимает 20% времени её работы.
Используя Закон Амдала, вычислите, на каком количестве процессоров вы должны запустить эту программу,
чтобы время работы программы сократилось в 4 раза.

#### Задача №3

На двухъядерном процессоре программа работает в 1,8 раз быстрее, чем на одноядерном.
Какого максимального ускорения удастся добиться при запуске этой программы на четырёхядерном процессоре?

#### Задача №4

Вы выбираете между одноядерным процессором, выполняющим 5 миллиардов операций в секунду
и 10-ядерным процессором, каждое ядро которого выполняет 1 миллиард операций в секунду.
Используя Закон Амдала объясните какой из процессоров вы приобретете для запуска
того или иного приложения.
